!function(a,b,c,d){"use strict";function e(a,b){var d=c(a),a=d.get(0),e={},b=c.extend({},e,b);this.options=b,this.element=function(){return a},p(),d.on("click",z)}var f=function(a,d){var e=new RegExp("(^|>)([s|\r?\n|\r|	]*)<s*"+d+".*>","i").exec(a),f=!1;if(e){a=a.substr(e.index+e[0].length);var g=new RegExp(">([s|\r?\n|\r|	]*)<s*/s*"+d,"i").exec(a);if(g){var h=b.createElement("div");h.innerHTML=a.substr(0,g.index+g[0].length-d.length-2),f=c(h)}}return f},g=1,h={},i=0,j={},k=function(a,d,e){var f=new RegExp("<s*"+e+"(.*)>","i").exec(d);if(f){var g="<div "+f[1]+"></div>",h=b.createElement("div");h.innerHTML=g,c.each(h.childNodes[0].attributes,function(b,c){a.attr(c.name,c.value)})}},l=function(a){for(var b=/([\s|\r?\n|\r|\t]*)(<\s*script((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)>([\s\S]*?)<\s*\/\s*script\s*>)([\s|\r?\n|\r|\t]*)/gi,c=a.match(b),d="",e=0,f=c.length;f>e;e++)d+=c[e].replace(b,";$6"),a=a.replace(c[e],"");return a},m="undefined"!=typeof a.history&&"undefined"!=typeof a.history.state&&"undefined"!=typeof a.onpopstate,n=!1,o=!1,p=function(){n||(n=!0,m&&c(a).off("popstate").one("popstate",function(a){a.state&&"undefined"!=typeof a.state.response&&(o=!1,w.call(j[a.state.id],a.state.response))}))},q=function(){return c(this).is("link")&&"stylesheet"==c(this).attr("rel")&&c(this).attr("href")},r=function(){return c(this).is("script")&&c(this).attr("src")},s=function(){return c(this).is("script")},t=function(){return!r.call(this)&&!q.call(this)},u=function(a,b){return c(this).attr(a)!=b},v=function(a,b){return c(this).attr(a)==b},w=function(d){var e=f(d,"head"),g=f(d,"body"),h=c("link",e).filter(q),i=c("script",e).filter(r),j=c("*",e).filter(t),m=c("script",g).filter(s),n=(c(),c(),{bodyHTML:l(g.html()),headStylesheets:function(){c("head link").filter(q).filter(function(){var a=c(this).attr("href"),b=h.filter(function(){return v.call(this,"href",a)}),d=0===b.length;return h=h.filter(function(){return u.call(this,"href",a)}),d}).remove(),h.length&&c("head").append(h)},headScripts:function(){c("head script").remove(),i.length&&c("head").append(i)},headOthers:function(){c("head *").filter(t).remove(),j.length&&c("head").append(j)},htmlAttributes:function(){k(c("html"),d,"html")},bodyAttributes:function(){k(c("body"),d,"body")},bodyScripts:function(){if(c("body script").remove(),m.length){var d=function(a){if(m.length<=0)return void a();var c,e=m.get(0),f="undefined"==typeof e.src||!e.src;m=m.slice(1),c=b.createElement("script"),c.async=!1,f?(c.innerHTML=e.innerHTML,b.body.appendChild(c),d(a)):(c.onload=function(){d(a)},c.src=e.src,b.body.appendChild(c))};d(function(){c(a).trigger("load")})}},replaceBody:function(){c("body").html(this.bodyHTML),this.bodyAttributes()},renderHead:function(){this.htmlAttributes(),this.headOthers(),this.headStylesheets(),this.headScripts()},renderBody:function(){this.replaceBody(),this.bodyScripts()},render:function(){this.renderHead(),this.renderBody()}});c(this).one("pageReady",function(a,b){b.render()}).trigger("pageReady",[n])},x=function(d){var e=this;c.ajax({async:!0,url:d,success:function(f){w.call(e,f);var g=b.createElement("a"),h=b.createElement("a");g.href=d,h.href=a.location.href,m&&g.href!==h.href&&(o=!0,c(e).data("dynamite-id")?i=c(e).data("dynamite-id"):(c(e).data("dynamite-id",i),j[i]=e),a.history.pushState({response:f,id:i},"",d))}})},y="async"in b.createElement("script"),z=function(d){var e=c(this).attr("href"),f=b.createElement("a");return f.href=a.location.href,e&&this.host===f.host?(d.preventDefault(),x.call(this,e),!1):void 0};c.fn.dynamite=function(a){var b=[],d=this.each(function(){if(y){var d=c(this).data("dynamite"),f=null;if(d){if(f=h[d]||null,null===f)return}else d=g++,c(this).data("dynamite",d);null===f||"undefined"!=typeof a?(f=new e(this,a),h[d]=f):b.push(f)}}),f=b.length;return f?1===f?b[0]:b:d},c(function(){c("[data-dynamite-detect=false]").first().length||c("[data-dynamite]").dynamite()})}(window,document,window.Zepto||window.jQuery);